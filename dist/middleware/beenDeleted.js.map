{"version":3,"sources":["../../src/middleware/beenDeleted.js"],"names":["checkIfDeleted","req","res","next","id","Number","params","queryStr","rows","length","status","json","message"],"mappings":";;;;;;;AAAA;;;;;;;;SAEeA,c;;;;;;;0BAAf,iBAA8BC,GAA9B,EAAmCC,GAAnC,EAAwCC,IAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AACQC,YAAAA,EADR,GACaC,MAAM,CAACJ,GAAG,CAACK,MAAJ,CAAWF,EAAZ,CADnB;AAEQG,YAAAA,QAFR,gDAEyDH,EAFzD;AAAA;AAAA,mBAIqB,uBAAGG,QAAH,CAJrB;;AAAA;AAIQC,YAAAA,IAJR;;AAAA,gBAKOA,IAAI,CAACC,MALZ;AAAA;AAAA;AAAA;;AAAA,6CAMWP,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC1BD,cAAAA,MAAM,EAAE,GADkB;AAE1BE,cAAAA,OAAO,EAAE;AAFiB,aAArB,CANX;;AAAA;AAAA,6CAYST,IAAI,EAZb;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;eAeeH,c","sourcesContent":["import db from '../models/dbconfig';\r\n\r\nasync function checkIfDeleted(req, res, next) {\r\n  const id = Number(req.params.id);\r\n  const queryStr = `SELECT name FROM party WHERE id = '${id}'`;\r\n\r\n  const rows = await db(queryStr);\r\n  if (!rows.length) {\r\n    return res.status(400).json({\r\n      status: 400,\r\n      message: 'This entity had already been deleted',\r\n    });\r\n  }\r\n\r\n  return next();\r\n}\r\n\r\nexport default checkIfDeleted;\r\n"],"file":"beenDeleted.js"}