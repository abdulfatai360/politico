{"version":3,"sources":["../../src/middleware/userAuth.js"],"names":["dotenv","config","userAuth","req","res","next","token","header","status","json","error","payload","jwt","verify","process","env","JWT_SECRET_KEY","console","log","signature","user"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEAA,gBAAOC,MAAP;;AAEA,SAASC,QAAT,CAAkBC,GAAlB,EAAuBC,GAAvB,EAA4BC,IAA5B,EAAkC;AAChC,MAAMC,KAAK,GAAGH,GAAG,CAACI,MAAJ,CAAW,cAAX,CAAd;;AACA,MAAI,CAACD,KAAL,EAAY;AACV,WAAOF,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC1BD,MAAAA,MAAM,EAAE,GADkB;AAE1BE,MAAAA,KAAK,EAAE;AAFmB,KAArB,CAAP;AAID;;AAED,MAAI;AACF,QAAMC,OAAO,GAAGC,sBAAIC,MAAJ,CAAWP,KAAX,EAAkBQ,OAAO,CAACC,GAAR,CAAYC,cAA9B,CAAhB;;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYP,OAAO,CAACQ,SAApB;AACAhB,IAAAA,GAAG,CAACiB,IAAJ,GAAWT,OAAX;AACA,WAAON,IAAI,EAAX;AACD,GALD,CAKE,OAAOK,KAAP,EAAc;AACd,WAAON,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC1BD,MAAAA,MAAM,EAAE,GADkB;AAE1BE,MAAAA,KAAK,EAAE;AAFmB,KAArB,CAAP;AAID;AACF;;eAEcR,Q","sourcesContent":["import jwt from 'jsonwebtoken';\r\nimport dotenv from 'dotenv';\r\n\r\ndotenv.config();\r\n\r\nfunction userAuth(req, res, next) {\r\n  const token = req.header('x-auth-token');\r\n  if (!token) {\r\n    return res.status(401).json({\r\n      status: 401,\r\n      error: 'Unauthorized access to perform this operation',\r\n    });\r\n  }\r\n\r\n  try {\r\n    const payload = jwt.verify(token, process.env.JWT_SECRET_KEY);\r\n    console.log(payload.signature)\r\n    req.user = payload;\r\n    return next();\r\n  } catch (error) {\r\n    return res.status(400).json({\r\n      status: 400,\r\n      error: 'Invalid token credentials',\r\n    });\r\n  }\r\n}\r\n\r\nexport default userAuth;\r\n"],"file":"userAuth.js"}