{"version":3,"sources":["../../src/routes/office.js"],"names":["router","express","Router","post","req","res","body","office","party","id","params","queryStr","Number","db","query","rows","status","json","data","error","detail"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;;;;;AAEA,IAAMA,MAAM,GAAGC,iBAAQC,MAAR,EAAf;;AAEAF,MAAM,CAACG,IAAP,CAAY,eAAZ;AAAA;AAAA;AAAA;AAAA;AAAA,0BAA6B,iBAAOC,GAAP,EAAYC,GAAZ;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,wBACDD,GAAG,CAACE,IADH,EACnBC,MADmB,aACnBA,MADmB,EACXC,KADW,aACXA,KADW;AAEnBC,YAAAA,EAFmB,GAEZL,GAAG,CAACM,MAFQ,CAEnBD,EAFmB;AAIrBE,YAAAA,QAJqB,2EAKfC,MAAM,CAACL,MAAD,CALS,iBAKMK,MAAM,CAACJ,KAAD,CALZ,iBAK0BI,MAAM,CAACH,EAAD,CALhC;AAAA;AAAA;AAAA,mBASFI,aAAGC,KAAH,CAASH,QAAT,CATE;;AAAA;AAAA;AASjBI,YAAAA,IATiB,SASjBA,IATiB;AAAA,6CAUlBV,GAAG,CAACW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC1BD,cAAAA,MAAM,EAAE,GADkB;AAE1BE,cAAAA,IAAI,EAAEH,IAAI,CAAC,CAAD;AAFgB,aAArB,CAVkB;;AAAA;AAAA;AAAA;AAAA,6CAelBV,GAAG,CAACW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC1BD,cAAAA,MAAM,EAAE,GADkB;AAE1BG,cAAAA,KAAK,EAAE,YAAMC;AAFa,aAArB,CAfkB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAA7B;;AAAA;AAAA;AAAA;AAAA;eAsBepB,M","sourcesContent":["import '@babel/polyfill';\r\nimport express from 'express';\r\nimport { db } from '../models/dbconfig';\r\n\r\nconst router = express.Router();\r\n\r\nrouter.post('/:id/register', async (req, res) => {\r\n  const { office, party } = req.body;\r\n  const { id } = req.params;\r\n\r\n  const queryStr = `INSERT INTO candidates(office, party, candidate)\r\n    VALUES('${Number(office)}', '${Number(party)}', '${Number(id)}') \r\n    RETURNING office, candidate`;\r\n\r\n  try {\r\n    const { rows } = await db.query(queryStr);\r\n    return res.status(201).json({\r\n      status: 201,\r\n      data: rows[0],\r\n    });\r\n  } catch (error) {\r\n    return res.status(500).json({\r\n      status: 500,\r\n      error: error.detail,\r\n    });\r\n  }\r\n});\r\n\r\nexport default router;\r\n"],"file":"office.js"}