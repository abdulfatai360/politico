{"version":3,"sources":["../../src/routes/office.js"],"names":["router","express","Router","post","userAuth","adminAuth","req","res","body","office","party","id","params","queryStr","Number","db","query","rows","status","json","data","error","detail"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;;;;;;;AAEA,IAAMA,MAAM,GAAGC,iBAAQC,MAAR,EAAf;;AAEAF,MAAM,CAACG,IAAP,CAAY,eAAZ,EAA6BC,iBAA7B,EAAuCC,kBAAvC;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAkD,iBAAOC,GAAP,EAAYC,GAAZ;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,wBACtBD,GAAG,CAACE,IADkB,EACxCC,MADwC,aACxCA,MADwC,EAChCC,KADgC,aAChCA,KADgC;AAExCC,YAAAA,EAFwC,GAEjCL,GAAG,CAACM,MAF6B,CAExCD,EAFwC;AAI1CE,YAAAA,QAJ0C,2EAKpCC,MAAM,CAACL,MAAD,CAL8B,iBAKfK,MAAM,CAACJ,KAAD,CALS,iBAKKI,MAAM,CAACH,EAAD,CALX;AAAA;AAAA;AAAA,mBASvBI,aAAGC,KAAH,CAASH,QAAT,CATuB;;AAAA;AAAA;AAStCI,YAAAA,IATsC,SAStCA,IATsC;AAAA,6CAUvCV,GAAG,CAACW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC1BD,cAAAA,MAAM,EAAE,GADkB;AAE1BE,cAAAA,IAAI,EAAEH,IAAI,CAAC,CAAD;AAFgB,aAArB,CAVuC;;AAAA;AAAA;AAAA;AAAA,6CAevCV,GAAG,CAACW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC1BD,cAAAA,MAAM,EAAE,GADkB;AAE1BG,cAAAA,KAAK,EAAE,YAAMC;AAFa,aAArB,CAfuC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAlD;;AAAA;AAAA;AAAA;AAAA;eAsBetB,M","sourcesContent":["import '@babel/polyfill';\r\nimport express from 'express';\r\nimport { db } from '../models/dbconfig';\r\nimport userAuth from '../middleware/userAuth';\r\nimport adminAuth from '../middleware/adminAuth';\r\n\r\nconst router = express.Router();\r\n\r\nrouter.post('/:id/register', userAuth, adminAuth, async (req, res) => {\r\n  const { office, party } = req.body;\r\n  const { id } = req.params;\r\n\r\n  const queryStr = `INSERT INTO candidates(office, party, candidate)\r\n    VALUES('${Number(office)}', '${Number(party)}', '${Number(id)}') \r\n    RETURNING office, candidate`;\r\n\r\n  try {\r\n    const { rows } = await db.query(queryStr);\r\n    return res.status(201).json({\r\n      status: 201,\r\n      data: rows[0],\r\n    });\r\n  } catch (error) {\r\n    return res.status(500).json({\r\n      status: 500,\r\n      error: error.detail,\r\n    });\r\n  }\r\n});\r\n\r\nexport default router;\r\n"],"file":"office.js"}